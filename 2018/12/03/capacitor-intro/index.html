<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>Capacitor - The Native Bridge for Cross-Platform Web Apps</title><meta name="description" content="Working smart!"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-391C0PJRZ6"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-391C0PJRZ6');</script><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="
Hybrid App談到 Hybrid App 你會想到什麼呢？大部分的人都一定會想到 Phonegap 或是 Cordova 吧，這些框架讓我們可以將 Web 封裝成 App 的形式，並且能夠在行動裝置的作業系統上運作，例如 Android, iOS 等主流的行動平台。並且讓我們透過各種原生的 plugin 的方式，以一份原始碼能夠在不同平台上執行的目的，提供開發者更有效率且容易維護的一套解決方案。而 Capacitor 呢？
Native Progressive Web AppsCapacitor 的靈感來自其他熱門的跨平台工具例如： React Native 以及 Turbolinks ， 並繼承 Apache Cordova 和 Adobe PhoneGap 的精神，完全專注於使現代的網站應用能很.."><meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="Jeff's WebTech Note" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Jeff Wu's Note</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Capacitor - The Native Bridge for Cross-Platform Web Apps</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hybrid-App"><span class="toc-text">Hybrid App</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Native-Progressive-Web-Apps"><span class="toc-text">Native Progressive Web Apps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-Capacitor"><span class="toc-text">Installing Capacitor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A2%BA%E8%AA%8D%E6%89%80%E9%9C%80%E7%9A%84%E7%9B%B8%E4%BE%9D%E5%A5%97%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E5%AE%89%E8%A3%9D"><span class="toc-text">確認所需的相依套件是否有安裝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iOS-%E9%96%8B%E7%99%BC"><span class="toc-text">iOS 開發</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Android-%E9%96%8B%E7%99%BC"><span class="toc-text">Android 開發</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Electron-%E9%96%8B%E7%99%BC"><span class="toc-text">Electron 開發</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%8F%BE%E6%9C%89%E7%9A%84-Web-%E5%B0%88%E6%A1%88%E4%B8%8B%E5%8A%A0%E5%85%A5-Capacitor"><span class="toc-text">在現有的 Web 專案下加入 Capacitor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Capacitor-Starter-%E6%90%AD%E9%85%8D-Ionic-Framework"><span class="toc-text">使用 Capacitor Starter 搭配 Ionic Framework</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Android"><span class="toc-text">Android</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#iOS"><span class="toc-text">iOS</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%B5%90"><span class="toc-text">小結</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/capacitor"><i class="tag post-item-tag">capacitor</i></a><a href="/tags/hybrid%20app"><i class="tag post-item-tag">hybrid app</i></a><a href="/tags/ionic%204"><i class="tag post-item-tag">ionic 4</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Capacitor - The Native Bridge for Cross-Platform Web Apps</h1><time class="has-text-grey" datetime="2018-12-03T12:16:22.000Z">2018-12-03</time><article class="mt-2 post-content"><p><img src="/images/capacitor-intro/capacitor-logo.jpg"></p>
<h2 id="Hybrid-App"><a href="#Hybrid-App" class="headerlink" title="Hybrid App"></a>Hybrid App</h2><p>談到 <code>Hybrid App</code> 你會想到什麼呢？大部分的人都一定會想到 Phonegap 或是 Cordova 吧，這些框架讓我們可以將 Web 封裝成 App 的形式，並且能夠在行動裝置的作業系統上運作，例如 Android, iOS 等主流的行動平台。並且讓我們透過各種原生的 plugin 的方式，以一份原始碼能夠在不同平台上執行的目的，提供開發者更有效率且容易維護的一套解決方案。而 Capacitor 呢？</p>
<h2 id="Native-Progressive-Web-Apps"><a href="#Native-Progressive-Web-Apps" class="headerlink" title="Native Progressive Web Apps"></a>Native Progressive Web Apps</h2><p>Capacitor 的靈感來自其他熱門的跨平台工具例如： <a target="_blank" rel="noopener" href="http://facebook.github.io/react-native/">React Native</a> 以及 <a target="_blank" rel="noopener" href="https://github.com/turbolinks/turbolinks">Turbolinks</a> ， 並繼承 <a target="_blank" rel="noopener" href="https://cordova.apache.org/">Apache Cordova</a> 和 <a target="_blank" rel="noopener" href="https://phonegap.com/">Adobe PhoneGap</a> 的精神，完全專注於使現代的網站應用能很簡單的在目前主流的平台上執行。同時也向後兼容許多現有的 <a target="_blank" rel="noopener" href="https://cordova.apache.org/plugins/">Cordova plugins</a>。要入門 Capacitor 其實是相當簡單，馬上就來試試看吧。</p>
<span id="more"></span>

<h2 id="Installing-Capacitor"><a href="#Installing-Capacitor" class="headerlink" title="Installing Capacitor"></a>Installing Capacitor</h2><p>開始的方式有兩種，直接在現有的前端專案下加入 Capacitor，或是直接建立一個全新的專案。Capacitor 主要是設計成在現有的專案下生成，如果想要以全新的專案開始，也會提供簡單的初始專案架構。Capacitor 提供了一個原生行動平台的 runtime 以及可在網頁應用呼叫的 API。但沒有提供像是遊戲開發所需的特定 UI 控制元件。官方強烈建議使用行動平台的前端框架 ( 例如 <a target="_blank" rel="noopener" href="https://beta.ionicframework.com/docs/">ionic</a> ) 來作為初始化專案，儘管全新初始化的專案有提供完全空白且沒有前端 UI 框架的應用，但以 ionic 建立的起始專案就可以建置生產就緒的 Native App 以及漸進式網站應用 ( PWA ) 。</p>
<h3 id="確認所需的相依套件是否有安裝"><a href="#確認所需的相依套件是否有安裝" class="headerlink" title="確認所需的相依套件是否有安裝"></a>確認所需的相依套件是否有安裝</h3><p>由於跨平台的原因，所需要的相依套件或環境主要視我們鎖定要支援的平台情況而定，基本所需的就是 <a target="_blank" rel="noopener" href="https://nodejs.org/">Node v8.6.0</a> 以上，NPM 5.6.0 以上 ( 一般安裝 node 之後就會一起安裝了 )。至於 yarn 的部分，目前官方並沒有正式支援使用 yarn 進行安裝，也尚未針對 yarn 提供修復或開放提交相關問題的支援，因此建議還是先使用 node &amp; npm 來進行安裝。至於要執行在哪些平台，以及其相依的準備，整理在下方：</p>
<h4 id="iOS-開發"><a href="#iOS-開發" class="headerlink" title="iOS 開發"></a>iOS 開發</h4><p>需要 MacOS 以及 Xcode 9 以上。如果你只有 Windows，可以利用 <a target="_blank" rel="noopener" href="http://ionicframework.com/pro">Ionic Pro</a> 建置 iOS 應用。此外還需要安裝 <a target="_blank" rel="noopener" href="https://cocoapods.org/">CocoaPods</a> 以及 <strong>Xcode Command Line tools</strong></p>
<p>安裝 CocoaPods：</p>
<pre><code class="bash">sudo gem install cocoapods
</code></pre>
<p>安裝 <strong>Xcode Command Line tools</strong> 除了直接安裝 Xcode 就有內建之外，也可以利用指令安裝：</p>
<pre><code class="bash">xcode-select --install
</code></pre>
<p>CocoaPods 安裝完成之後，為了確保相依的版本是最新版的，我們需要定期的執行更新的指令：</p>
<pre><code class="bash">pod repo update
</code></pre>
<p>通常 Capacitor 支援的 iOS 版本為最後的兩個版本，例如 iOS 10 &amp; iOS 11，未來如果要支援舊的版本，就需要安裝舊版的 Capacitor ( 如果可用的話 )。</p>
<h4 id="Android-開發"><a href="#Android-開發" class="headerlink" title="Android 開發"></a>Android 開發</h4><p>首先要安裝 <strong>Java 8 JDK</strong> 並設定為預設，如果已經有安裝其他版本的話，須留意。至於 Java 9 目前還不能正常運作。此外還需要安裝 <a target="_blank" rel="noopener" href="https://developer.android.com/studio/index.html">Android Studio</a> 的 Android SDK，技術面來說，Android Studio 不是必須的安裝項目，因為也能透過 Android CLI 的方式進行，但為了使建置與執行應用更簡單，官方強烈建議使用 Android Studio。</p>
<p>Capacitor 在 Android 的版本支援上比 iOS 稍微複雜了些，目前鎖定的 API level 為 21 以上，相當於支援 Android 5.0 ( Lollipop ) 以上。在 2018 年一月時，統計的 Android 版本中，5.0 以上的使用者超過 75%，而且這個成長幅度相當快，因此官方認為當 Capacitor 可以準備推出正式版的時候，這個百分比會變得更高。同時，Capacitor 需要的 Android Webview 版本至少為 Chrome 50 以上。</p>
<h4 id="Electron-開發"><a href="#Electron-開發" class="headerlink" title="Electron 開發"></a>Electron 開發</h4><p>使用 Electron 開發並沒有特定相依需要安裝。</p>
<h3 id="在現有的-Web-專案下加入-Capacitor"><a href="#在現有的-Web-專案下加入-Capacitor" class="headerlink" title="在現有的 Web 專案下加入 Capacitor"></a>在現有的 Web 專案下加入 Capacitor</h3><p>由於 Capacitor 是設計成能夠直接在現有的 JS Web 專案中加入，因此要加入 Capacitor，我們必須先進入現有的 Web 應用專案，並安裝所需的套件。</p>
<pre><code class="bash">cd my-app
npm install --save @capacitor/core @capacitor/cli
</code></pre>
<p>進入現有的 Web 應用專案目錄並安裝完成後，執行初始化指令：</p>
<pre><code class="bash">npx cap init
</code></pre>
<p>這個指令會提示輸入 App 的資訊例如，App 名稱、要使用在 Android 平台的 App ID 以及要產生的目錄名稱。輸入完之後即完成初始化。</p>
<h3 id="使用-Capacitor-Starter-搭配-Ionic-Framework"><a href="#使用-Capacitor-Starter-搭配-Ionic-Framework" class="headerlink" title="使用 Capacitor Starter 搭配 Ionic Framework"></a>使用 Capacitor Starter 搭配 Ionic Framework</h3><p>未來即將整合至 ionic CLI，目前先以 <code>ionic start</code> 產生新的專案，初始化之後依照上方的初始化流程加入 Capacitor 專案。新增後可以接著在 ionic 專案目錄下執行建置 <code>ionic build</code>，建置完成後進入新增的 capacitor 專案目錄中。</p>
<h4 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h4><p>首先要加入 Android 平台到 capacitor 目錄：</p>
<pre><code class="bash">npx cap add android
</code></pre>
<p>接著進行同步，同步的內容主要為將外部的 dist 檔案內容複製到 <code>www</code> 目錄下，並檢查有無新的原生套件。</p>
<pre><code class="bash">npx cap sync
</code></pre>
<p>我們也可以只更新建置好的 web 內容：</p>
<pre><code class="bash">npx cap copy
</code></pre>
<p>若沒有新的原生相依套件需要更新，使用 <code>copy</code> 可以加快更新的速度。接著打開 Android Studio 並進行建置：</p>
<pre><code class="bash">npx cap open android
</code></pre>
<h4 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h4><p>和上方的順序一樣，只需要將 <code>android</code> 的部分改成 <code>ios</code> 即可。</p>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><p>透過以上的介紹，來初步了解 Capacitor 的初始化以及建置的流程，之後再找時間整理各平台可能較容易遇到的錯誤問題。</p>
<p>Reference</p>
<p><a target="_blank" rel="noopener" href="https://capacitor.ionicframework.com/">Capacitor</a><br><a target="_blank" rel="noopener" href="https://capacitor.ionicframework.com/docs/">Capacitor document</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2019/05/29/TypeScript%20intro%20and%20migrating/" title="TypeScript intro and migrating"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: TypeScript intro and migrating</span></a><a class="button is-default" href="/2018/06/03/cordova-week-5/" title="[Cordova Week-5] Cordova Plugin Geolocation"><span class="has-text-weight-semibold">Next: [Cordova Week-5] Cordova Plugin Geolocation</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="jeffwu85182/jeffwu85182.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/F2E_JeffWu"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/jeffwu85182"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in//jeff-wu-28ba1979"><i class="iconfont icon-linkedin"></i></a><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//CrazyWuJeff"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Jeff Wu 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>